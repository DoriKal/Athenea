extends layout

block content
    link(rel="import", href="/elements/x-trigger/x-trigger.html")
    link(rel="import", href="/bower_components/paper-toggle-button/paper-toggle-button.html")
    div(ng-controller="maratonesController")
        div(class="contentConfig")
            core-icon-button(icon="add", class="iconAdd", ng-click="abrirModalRegMaraton()", title="Agregar pregunta")
        div
            div(ng-repeat="maraton in maratones", class="contentZona contentMaraton")
                x-trigger(icon="menu", class="menu")
                    core-dropdown(class="with-margin")
                        core-item(ng-click="abrirModalEditMaraton(maraton.id_maraton)") editar
                        core-item(ng-click="abrirModalEliminarMaraton(maraton.id_maraton)") eliminar
                        core-item(ng-click="abrirConfiguracionMaraton(maraton.id_maraton)") configuración
                h3 {{maraton.mar_nombre}}

        paper-dialog(heading="Nuevo maraton", backdrop, id="modalRegMaraton",
            transition="core-transition-center")
            paper-input-decorator(label="Nombre del maratón", floatingLabel, autoValidate,
             error="El maratón debe tener minimo 8 caracteres")
                 input(type="text", minlength="8", ng-model="nombreNuevoMaraton")
            br
            paper-button(raised, ng-click="registrarMaraton()") Registrar

        paper-dialog(heading="Editar {{maratonEditar.mar_nombre}}", backdrop, id="modalEditMaraton",
            transition="core-transition-center")
            paper-input-decorator(label="Nombre del maratón", floatingLabel, autoValidate,
             error="El maratón debe tener minimo 8 caracteres")
                 input(type="text", minlength="8"
                 , ng-model="nombreMaratonActualizar")
            br
            paper-button(raised, ng-click="editarMaraton()") Guardar cambios

        paper-dialog(heading="Eliminar {{maratonEliminar.mar_nombre}}", backdrop, id="modalEliminarMaraton",
            transition="core-transition-center")
            br
            paper-button(raised, ng-click="eliminarMaraton()") Eliminar


    div(ng-controller="maratonesConfigController")
        div(id="modalConfig", hidden)
            div(class="contentConfig")
                core-icon-button(icon="close", ng-controller="maratonesController", ng-click="cerrarConfiguracionMaraton()", title="Cerrar")
            paper-tabs(selected="0", class="tabs-config")
                paper-tab(class="tabConfigMaratones", config="competidores", tabSelectedConf) Competidores
                paper-tab(class="tabConfigMaratones", config="preguntas") Preguntas
                paper-tab(class="tabConfigMaratones", config="competencia") Competencia
            

            div(id="competidores", class="divConfig")
                div(class="contentConfig")
                    core-icon-button(icon="add", ng-click="abrirModalAgregarUsuarioMaraton()", title="Agregar un competidor", class="iconAdd")
                button(id="btnInitConfigMaratones", ng-click="getI()")
                h3(ng-repeat="competidor in competidores", class="contentZona") {{competidor.usu_nombre}}


                paper-dialog(heading="Crear un competidor para este maraton", backdrop, id="modalRegCompetidorMaraton")
                    input(id="textoCompetidorIdMaraton", hidden)
                    paper-input-decorator(label="Nombre del competidor", floatingLabel, autoValidate, error="Minimo 5 caracteres")
                        input(type="text", ng-model="competidorNuevoNombre", required, minlength="5")
                    paper-input-decorator(label="Usuario del competidor", floatingLabel, autoValidate, error="Minimo 5 caracteres")
                        input(type="text", ng-model="competidorNuevoNombreUsuario", required, minlength="5")
                    
                    //label Definir contraseña 
                    //paper-toggle-button(id="toggleContraseñaCompetidor")
                    //label  (Sino se define se tomará el usuario como contraseña)
                    br
                    paper-button(raised, ng-click="crearCompetidor()") Registrar








            div(id="preguntas", class="divConfig")
                div(class="contentConfig")
                    core-icon-button(icon="add", ng-click="abrirModalAgregarUsuarioMaraton()", title="Agregar un competidor", class="iconAdd")
                h3 preguntas

            div(id="competencia", class="divConfig")
                h3 competencia


    script(src="/javascripts/socket.io.js")
    script(src="/javascripts/angular-controllers/maratonesController.js")
    script(src="/javascripts/angular-controllers/maratonesConfigController.js")
